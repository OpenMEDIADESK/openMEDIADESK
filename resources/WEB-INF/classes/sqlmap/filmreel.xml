<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap
  PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
  "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Filmreel">

    <select id="getFilmReelById" parameterClass="int" resultClass="com.stumpner.mediadesk.image.filmreel.FilmReel">
        SELECT
            filmreelid      as filmReelId,
            deploymentdate  as deploymentDate,
            deployuserid    as deployUserId,
            filmreeltitle   as filmReelTitle,
            filmreelname    as filmReelName
        FROM filmreel
        WHERE filmreelid = #value#
    </select>

    <select id="getMaxFilmReelId"
        parameterClass="int"
        resultClass="int">
        SELECT
            MAX(filmreelid) as value
        FROM filmreel
    </select>

    <insert id="addFilmReel" parameterClass="com.stumpner.mediadesk.image.filmreel.FilmReel">
        INSERT INTO
        filmreel (deploymentdate,deployuserid,filmreeltitle,filmreelname)
        VALUES (#deploymentDate#,#deploymentUserId#,#filmReelTitle#,#filmReelName#)
    </insert>

    <insert id="addImageToFilmReel" parameterClass="com.stumpner.mediadesk.image.filmreel.FilmReelHolder">
        INSERT INTO
        filmreelholder (filmreelid,ivid,pos)
        VALUES (#filmReelId#,#ivid#,#pos#)
    </insert>

    <delete id="deleteImageFromFilmReel" parameterClass="com.stumpner.mediadesk.image.filmreel.FilmReelHolder">
        DELETE filmreelholder
        WHERE filmreelid = #filmReelId# AND ivid = #ivid#
    </delete>

    <update id="saveFilmReel" parameterClass="com.stumpner.mediadesk.image.filmreel.FilmReel">
        UPDATE filmreel
        SET filmreeltitle = #filmReelTitle#,
            filmreelname = #filmReelName#
        WHERE filmreelid = #filmReelId#
    </update>

</sqlMap>